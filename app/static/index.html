<!doctype html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Budget Planner – Frontend</title>
  <style>
    :root {
      --bg-1: #0f172a; /* slate-900 */
      --bg-2: #111827; /* gray-900 */
      --surface: rgba(255,255,255,0.06);
      --surface-border: rgba(255,255,255,0.12);
      --text: #e5e7eb; /* gray-200 */
      --text-muted: #9ca3af; /* gray-400 */
      --primary: #22d3ee; /* cyan-400 */
      --primary-strong: #06b6d4; /* cyan-500 */
      --ok: #10b981; /* emerald-500 */
      --err: #ef4444; /* red-500 */
      color-scheme: dark;
    }

    * { box-sizing: border-box; }

    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      margin: 0;
      min-height: 100dvh;
      color: var(--text);
      background: radial-gradient(1200px 800px at 10% -10%, #1f2937 0%, transparent 60%),
                  radial-gradient(1200px 800px at 100% 0%, #0e7490 0%, transparent 55%),
                  linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 100%);
      display: grid;
      grid-template-rows: auto 1fr auto;
    }

    header {
      border-bottom: 1px solid var(--surface-border);
      background: linear-gradient(0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02));
      backdrop-filter: blur(6px);
    }
    .nav {
      max-width: 960px; margin: 0 auto; padding: 1rem 1.25rem;
      display: flex; align-items: center; justify-content: space-between;
    }
    .brand { font-weight: 700; letter-spacing: 0.3px; }
    .brand b { color: var(--primary); }
    .links a { color: var(--text-muted); text-decoration: none; margin-left: 1rem; }
    .links a:hover { color: var(--text); }

    main { padding: clamp(1.25rem, 3vw, 2.5rem); }
    .container { max-width: 960px; margin: 0 auto; }

    .hero {
      display: grid; gap: 0.75rem; margin-bottom: 1.25rem;
    }
    .hero h1 { margin: 0; font-size: clamp(1.4rem, 2.6vw, 2rem); }
    .muted { color: var(--text-muted); font-size: 0.96rem; }

    .card {
      background: var(--surface);
      border: 1px solid var(--surface-border);
      border-radius: 12px;
      padding: 1.25rem 1.25rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
      backdrop-filter: blur(6px);
    }

    .row { display: flex; align-items: center; gap: 0.75rem; flex-wrap: wrap; }

    button {
      padding: 0.65rem 1rem;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.18);
      color: #0b1220;
      background: linear-gradient(180deg, var(--primary) 0%, var(--primary-strong) 100%);
      box-shadow: 0 8px 18px rgba(34, 211, 238, 0.25);
      cursor: pointer;
      font-weight: 600;
      transition: transform .08s ease, box-shadow .2s ease, filter .2s ease;
    }
    button:hover { filter: brightness(1.05); box-shadow: 0 10px 22px rgba(34, 211, 238, 0.32); }
    button:active { transform: translateY(1px); }

    code {
      background: rgba(255,255,255,0.08);
      padding: 0.2rem 0.4rem; border-radius: 6px; border: 1px solid var(--surface-border);
    }

    a { color: var(--primary); }
    a:hover { color: var(--primary-strong); }

    .ok { color: var(--ok); }
    .err { color: var(--err); }

    footer { border-top: 1px solid var(--surface-border); padding: 1rem 1.25rem; }
    .foot { max-width: 960px; margin: 0 auto; color: var(--text-muted); font-size: 0.9rem; }
  </style>
</head>
<body>
  <header>
    <div class="nav">
      <div class="brand">Budget <b>Planner</b></div>
      <div class="links">
        <a href="/docs" target="_blank" rel="noreferrer">API docs</a>
        <a href="/api/openapi.json" target="_blank" rel="noreferrer">OpenAPI</a>
      </div>
    </div>
  </header>
  <main>
    <div class="container">
      <div class="hero">
        <h1>Budget Planner – Frontend (integracja z backendem)</h1>
        <p class="muted">Ten interfejs jest serwowany przez FastAPI i łączy się z endpointem <code>/api/ping</code>.</p>
      </div>

<!--      <div class="card">-->
<!--        <div class="row" style="justify-content: space-between;">-->
<!--          <p style="margin:0"><strong>Status połączenia z API:</strong> <span id="status" class="muted">(oczekiwanie...)</span></p>-->
<!--          <button id="checkBtn">Sprawdź połączenie</button>-->
<!--        </div>-->
<!--      </div>-->

      <div class="card" style="margin-top:1rem;">
        <div class="row" style="justify-content: space-between; align-items: flex-start;">
          <div>
            <h3 style="margin:0 0 .5rem 0;">Szybki podgląd salda</h3>
            <div class="muted">Dane z endpointu <code>/api/reports/balance</code></div>
          </div>
          <div class="row">
            <button id="refreshBalanceBtn" title="Odśwież saldo">Odśwież saldo</button>
          </div>
        </div>
        <div class="row" style="margin-top:.75rem; flex-wrap:wrap; gap:1.25rem;">
          <div><strong>Przychody:</strong> <span id="income">0.00</span></div>
          <div><strong>Wydatki:</strong> <span id="expense">0.00</span></div>
          <div><strong>Saldo:</strong> <span id="net" class="muted">0.00</span></div>
        </div>
      </div>

      <div class="card" style="margin-top:1rem;">
        <div class="row" style="justify-content: space-between; align-items: center;">
          <div>
            <h3 style="margin:0 0 .5rem 0;">Ostatnie transakcje</h3>
            <div class="muted">Dane z endpointu <code>/api/transactions?limit=5</code></div>
          </div>
          <div class="row">
            <button id="refreshTxBtn" title="Odśwież listę">Odśwież listę</button>
          </div>
        </div>
        <ul id="txList" style="list-style:none; margin:.5rem 0 0 0; padding:0;"></ul>
      </div>
      <div class="card" style="margin-top:1rem;">
        <div class="row" style="justify-content: space-between; align-items: center;">
          <div>
            <h3 style="margin:0 0 .5rem 0;">Akcje danych</h3>
            <div class="muted">Widoczne API: <code>POST /api/debug/clear</code></div>
          </div>
          <div class="row">
            <button id="clearBtn" title="Usuń wszystkie dane">Wyczyść wszystko</button>
          </div>
        </div>
      </div>

      <div class="card" style="margin-top:1rem;">
        <div class="row" style="justify-content: space-between; align-items: flex-start;">
          <div>
            <h3 style="margin:0 0 .5rem 0;">Raport miesięczny</h3>
            <div class="muted">Endpoint: <code>/api/reports/monthly?year=&month=</code> (domyślnie bieżący miesiąc)</div>
          </div>
          <div class="row">
            <button id="monthlyBtn" title="Pobierz raport za bieżący miesiąc">Pobierz raport</button>
          </div>
        </div>
        <div id="monthlyOut" class="muted" style="margin-top:.5rem;">(brak danych)</div>
      </div>

      <div class="card" style="margin-top:1rem;">
        <div class="row" style="justify-content: space-between; align-items: center;">
          <div>
            <h3 style="margin:0 0 .5rem 0;">Raport wg kategorii</h3>
            <div class="muted">Endpoint: <code>/api/reports/by-category</code></div>
          </div>
          <div class="row">
            <button id="catReportBtn" title="Pobierz raport wg kategorii">Pobierz raport</button>
          </div>
        </div>
        <ul id="catReportOut" style="list-style:none; margin:.5rem 0 0 0; padding:0;"></ul>
      </div>

      <!-- Kategorie: formularz i lista -->
      <div class="card" style="margin-top:1rem;">
        <h3 style="margin-top:0">Kategorie</h3>
        <form id="catForm" class="row" style="gap:.5rem; align-items:flex-end;">
          <div>
            <label for="catName" class="muted">Nazwa</label><br>
            <input id="catName" type="text" placeholder="np. Jedzenie" required style="padding:.5rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)" />
          </div>
          <div>
            <label for="catColor" class="muted">Kolor</label><br>
            <input id="catColor" type="color" value="#22d3ee" style="padding:.35rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)" />
          </div>
          <button type="submit">Dodaj kategorię</button>
        </form>
        <ul id="catList" style="list-style:none; margin:.75rem 0 0 0; padding:0;"></ul>
      </div>

      <!-- Transakcje: formularz dodawania -->
      <div class="card" style="margin-top:1rem;">
        <h3 style="margin-top:0">Dodaj transakcję</h3>
        <form id="txForm" class="row" style="gap:.5rem; align-items:flex-end; flex-wrap:wrap;">
          <div>
            <label class="muted" for="txType">Typ</label><br>
            <select id="txType" required style="padding:.5rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)">
              <option value="income">Przychód</option>
              <option value="expense">Wydatek</option>
            </select>
          </div>
          <div>
            <label class="muted" for="txAmount">Kwota</label><br>
            <input id="txAmount" type="number" step="0.01" min="0" placeholder="0.00" required style="padding:.5rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)" />
          </div>
          <div>
            <label class="muted" for="txCategory">Kategoria</label><br>
            <select id="txCategory" style="padding:.5rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)">
              <option value="">(Brak)</option>
            </select>
          </div>
          <div style="min-width:240px; flex:1;">
            <label class="muted" for="txDesc">Opis</label><br>
            <input id="txDesc" type="text" placeholder="np. Zakupy spożywcze" style="width:100%; padding:.5rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)" />
          </div>
          <div>
            <label class="muted" for="txDate">Data</label><br>
            <input id="txDate" type="datetime-local" required style="padding:.5rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)" />
          </div>
          <div>
            <label class="muted" for="txPlanned">Planowana?</label><br>
            <input id="txPlanned" type="checkbox" />
          </div>
          <button type="submit">Dodaj</button>
        </form>
      </div>

      <!-- Filtry i lista transakcji -->
      <div class="card" style="margin-top:1rem;">
        <div class="row" style="justify-content: space-between; align-items: flex-end;">
          <div>
            <h3 style="margin:0 0 .5rem 0;">Transakcje – filtruj</h3>
            <div class="muted">Endpoint: <code>/api/transactions</code></div>
          </div>
        </div>
        <form id="filterForm" class="row" style="gap:.5rem; align-items:flex-end; flex-wrap:wrap; margin-top:.5rem;">
          <div>
            <label class="muted" for="fType">Typ</label><br>
            <select id="fType" style="padding:.5rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)">
              <option value="">(Wszystkie)</option>
              <option value="income">Przychód</option>
              <option value="expense">Wydatek</option>
            </select>
          </div>
          <div>
            <label class="muted" for="fCategory">Kategoria</label><br>
            <select id="fCategory" style="padding:.5rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)">
              <option value="">(Wszystkie)</option>
            </select>
          </div>
          <div>
            <label class="muted" for="fFrom">Od</label><br>
            <input id="fFrom" type="date" style="padding:.5rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)" />
          </div>
          <div>
            <label class="muted" for="fTo">Do</label><br>
            <input id="fTo" type="date" style="padding:.5rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)" />
          </div>
          <div style="min-width:220px;">
            <label class="muted" for="fQ">Szukaj</label><br>
            <input id="fQ" type="text" placeholder="opis zawiera..." style="width:100%; padding:.5rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)" />
          </div>
          <div>
            <label class="muted" for="fLimit">Limit</label><br>
            <input id="fLimit" type="number" min="1" value="20" style="width:90px; padding:.5rem; border-radius:8px; border:1px solid var(--surface-border); background:rgba(0,0,0,0.2); color:var(--text)" />
          </div>
          <button type="submit">Filtruj</button>
        </form>
        <ul id="txFiltered" style="list-style:none; margin:.75rem 0 0 0; padding:0;"></ul>
      </div>
    </div>
  </main>
  <footer>
    <div class="foot">Wskazówka: Dokumentacja interfejsu API dostępna jest pod <a href="/docs" target="_blank">/docs</a>.</div>
  </footer>

  <script src="/static/main.js" type="module"></script>
</body>
</html>
